/**
 * CreamDesign 响应式断点系统
 * 支持手机、平板、PC 多端适配
 */

// ===== 断点定义 =====
$breakpoints: (
  xs: 0,
  // 手机（竖屏）
  sm: 576px,
  // 手机（横屏）/ 小平板
  md: 768px,
  // 平板（竖屏）
  lg: 992px,
  // 平板（横屏）/ 小桌面
  xl: 1200px,
  // 桌面
  xxl: 1400px, // 大桌面
);

// 设备类型断点
$device-mobile-max: 767px;
$device-tablet-min: 768px;
$device-tablet-max: 991px;
$device-desktop-min: 992px;

// 触摸目标大小
$touch-target-min: 44px; // iOS 推荐最小触摸目标
$touch-target-comfortable: 48px; // Android 推荐舒适触摸目标
$touch-spacing: 8px; // 最小间距
$touch-spacing-comfortable: 12px; // 舒适间距

// ===== 媒体查询 Mixin =====

// 响应式断点（向上）
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    $value: map-get($breakpoints, $breakpoint);
    @if $value == 0 {
      @content;
    } @else {
      @media (min-width: $value) {
        @content;
      }
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

// 响应式断点（向下）
@mixin respond-to-down($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    $value: map-get($breakpoints, $breakpoint);
    @if $value == 0 {
      @content;
    } @else {
      @media (max-width: $value - 1px) {
        @content;
      }
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

// 响应式断点（范围）
@mixin respond-to-between($min, $max) {
  $min-value: map-get($breakpoints, $min);
  $max-value: map-get($breakpoints, $max);

  @if $min-value and $max-value {
    @media (min-width: $min-value) and (max-width: $max-value - 1px) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint range: #{$min} to #{$max}";
  }
}

// ===== 设备类型 Mixin =====

// 仅手机端
@mixin mobile-only {
  @media (max-width: $device-mobile-max) {
    @content;
  }
}

// 仅平板端
@mixin tablet-only {
  @media (min-width: $device-tablet-min) and (max-width: $device-tablet-max) {
    @content;
  }
}

// 仅桌面端
@mixin desktop-only {
  @media (min-width: $device-desktop-min) {
    @content;
  }
}

// 手机 + 平板
@mixin mobile-and-tablet {
  @media (max-width: $device-tablet-max) {
    @content;
  }
}

// 平板 + 桌面
@mixin tablet-and-desktop {
  @media (min-width: $device-tablet-min) {
    @content;
  }
}

// ===== 交互设备检测 =====

// 触摸设备（手机、平板）
@mixin touch-device {
  @media (hover: none) and (pointer: coarse) {
    @content;
  }
}

// 鼠标设备（桌面）
@mixin mouse-device {
  @media (hover: hover) and (pointer: fine) {
    @content;
  }
}

// 高精度指针设备
@mixin fine-pointer {
  @media (pointer: fine) {
    @content;
  }
}

// 粗糙指针设备（触摸）
@mixin coarse-pointer {
  @media (pointer: coarse) {
    @content;
  }
}

// ===== 其他媒体查询 =====

// 深色模式
@mixin dark-mode {
  @media (prefers-color-scheme: dark) {
    @content;
  }
}

// 高对比度
@mixin high-contrast {
  @media (prefers-contrast: high) {
    @content;
  }
}

// 减少动画
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

// 打印样式
@mixin print {
  @media print {
    @content;
  }
}

// ===== 工具 Mixin =====

// 触摸目标大小
@mixin touch-target($size: $touch-target-min) {
  min-width: $size;
  min-height: $size;
}

// 触摸间距
@mixin touch-spacing($spacing: $touch-spacing-comfortable) {
  gap: $spacing;
  margin: $spacing;
}

// 移动端字体大小（防止 iOS 自动缩放）
@mixin mobile-font-size($size: 16px) {
  @include mobile-only {
    font-size: $size;
  }
}

// 响应式内边距
@mixin responsive-padding($mobile: 1rem, $tablet: 1.5rem, $desktop: 2rem) {
  padding: $mobile;

  @include tablet-only {
    padding: $tablet;
  }

  @include desktop-only {
    padding: $desktop;
  }
}

// 响应式字体大小
@mixin responsive-font-size(
  $mobile: 0.875rem,
  $tablet: 1rem,
  $desktop: 1.125rem
) {
  font-size: $mobile;

  @include tablet-only {
    font-size: $tablet;
  }

  @include desktop-only {
    font-size: $desktop;
  }
}
